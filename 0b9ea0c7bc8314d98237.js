(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{2055:function(t,e,n){t.exports=n.p+"img/d0e094c.png"},2056:function(t,e,n){t.exports=n.p+"img/8c9f0c7.png"},2057:function(t,e,n){t.exports=n.p+"img/acaece6.png"},2058:function(t,e,n){t.exports=n.p+"img/b630b17.png"},2059:function(t,e,n){t.exports=n.p+"img/052e32f.png"},2060:function(t,e,n){t.exports=n.p+"img/7b4da9a.png"},2061:function(t,e,n){t.exports=n.p+"img/a3443f9.png"},2062:function(t,e,n){t.exports=n.p+"img/6bcdba9.png"},2063:function(t,e,n){t.exports=n.p+"img/0a0206e.png"},2064:function(t,e,n){t.exports=n.p+"img/39f5d5c.png"},2065:function(t,e,n){t.exports=n.p+"img/20f20c4.png"},2066:function(t,e,n){t.exports=n.p+"img/1a9c8e4.png"},2067:function(t,e,n){t.exports=n.p+"img/651a575.png"},2068:function(t,e,n){t.exports=n.p+"img/bd5fb0c.png"},2069:function(t,e,n){t.exports=n.p+"img/476f57a.png"},2070:function(t,e,n){"use strict";var o=n(928);n.n(o).a},2071:function(t,e,n){(e=n(10)(!1)).push([t.i,".mask .el-select-dropdown .preview{display:flex;justify-content:space-between;align-content:center}.mask .el-select-dropdown .preview .el-image+div{line-height:3.125rem}.mask .el-select-dropdown .el-select-dropdown__item{height:4.375rem;padding-top:.625rem;padding-bottom:.625rem}.mask .el-select-dropdown .el-select-dropdown__item img{width:auto;height:3.125rem}",""]),t.exports=e},2443:function(t,e,n){"use strict";n.r(e);n(31),n(56);var o,r=n(13),c=n(784);o=n(852).fabric;var l={name:"ChristmasHat",data:function(){return{n:null,src:[n(2055),n(2056),n(2057),n(2058),n(2059),n(2060),n(2061),n(2062),n(2063),n(2064),n(2065),n(2066),n(2067),n(2068),n(2069)],style:0,logo:null,backgroundImage:null,canvas:null}},head:function(){return this.$store.state.currentTool.head},watch:{style:function(){this.n&&this.renderCanvas()}},mounted:function(){this.canvas=new o.Canvas(this.$refs.canvas)},methods:{handleChange:function(t){var e=this,n=t.target.files;if(!n.length)return!1;var o=n[0],c=new FileReader;c.readAsDataURL(o),c.addEventListener("load",Object(r.a)(regeneratorRuntime.mark((function t(){var image;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(image=new Image).onload=function(){e.backgroundImage=image,e.$nextTick(e.renderCanvas)},image.src=c.result;case 3:case"end":return t.stop()}}),t)}))),!1)},renderCanvas:function(){var t=this;this.canvas.clear();var image=this.backgroundImage,e=this.$refs.box.offsetWidth,n=1;image.width>e?(this.canvas.setWidth(e),this.canvas.setHeight(e/image.width*image.height),n=e/image.width):(this.canvas.setWidth(image.width),this.canvas.setHeight(image.height)),this.getLogo().then((function(){var n=image.width/2/t.logo.width;image.width>e&&(n=e/2/t.logo.width);var r=new o.Image(t.logo,{scaleX:n,scaleY:n,left:0,top:0});t.canvas.add(r),r.centerH(),t.canvas.renderAll()}));var r=new o.Image(image,{scaleX:n,scaleY:n,left:0,top:0,selectable:!1});this.canvas.setBackgroundImage(r)},getLogo:function(){var t=this;return new Promise((function(e,n){var image=new Image;image.crossOrigin="anonymous",image.onload=function(){t.logo=image,e(image)},image.onerror=n,image.src=t.src[t.style]}))},save:function(){if(!this.n)return!1;this.canvas.lowerCanvasEl.toBlob((function(t){Object(c.a)(URL.createObjectURL(t),"Christmas-Hat.png")}))}}},d=(n(2070),n(5)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mask"},[n("nya-container",{attrs:{title:"在线加口罩"}},[n("div",{staticClass:"nya-subtitle"},[t._v("\n            请选择要制作的图片\n        ")]),t._v(" "),n("el-input",{attrs:{type:"file",accept:"image/*",placeholder:t.n?t.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件",clearable:""},nativeOn:{change:function(e){return t.handleChange(e)}},model:{value:t.n,callback:function(e){t.n=e},expression:"n"}},[n("el-button",{attrs:{slot:"append"},on:{click:t.save},slot:"append"},[t._v("\n                下载\n            ")])],1),t._v(" "),n("div",{staticClass:"nya-subtitle mt-15"},[t._v("\n            选择口罩样式\n        ")]),t._v(" "),n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-append-to-body":!1},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}},t._l(t.src,(function(e,o){return n("el-option",{key:o,attrs:{label:"样式："+(o+1),value:o}},[n("div",{staticClass:"preview"},[n("el-image",{attrs:{src:t.src[o],fit:"contain"}}),t._v(" "),n("div",[t._v(t._s("样式："+(o+1)))])],1)])})),1)],1),t._v(" "),n("nya-container",{directives:[{name:"show",rawName:"v-show",value:t.n,expression:"n"}],attrs:{title:"预览"}},[n("div",{ref:"box",staticClass:"box"},[n("canvas",{ref:"canvas"})])]),t._v(" "),n("nya-container",{attrs:{title:"说明"}},[n("ul",{staticClass:"nya-list"},[n("li",[t._v("如果下载的图片出现带有线条的边框，请点击一下图片中口罩外的任意区域再下载")]),t._v(" "),n("li",[n("b",[t._v("在线生成不满意？ 复制这条消息，打开闲鱼€5o3X1dfQtUi€后打开闲鱼，可手工Photoshop代P~")])])])])],1)}),[],!1,null,null,null);e.default=component.exports},784:function(t,e,n){"use strict";e.a=function(t,e){var a=document.createElement("a");a.href=t,a.download=e,a.click()}},853:function(t,e){},854:function(t,e){},855:function(t,e){},928:function(t,e,n){var content=n(2071);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("3ba6297f",content,!0,{sourceMap:!1})}}]);