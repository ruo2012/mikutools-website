(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{2323:function(t,e,n){"use strict";var o=n(976);n.n(o).a},2324:function(t,e,n){(e=n(10)(!1)).push([t.i,".website_screenshots img{max-width:100%}.website_screenshots .size{display:flex;align-items:center}.website_screenshots .size .nya-subtitle{width:6.25rem;margin-bottom:0}.website_screenshots .size span{width:1.875rem;display:inline-block}",""]),t.exports=e},2492:function(t,e,n){"use strict";n.r(e);n(220),n(169),n(224),n(49),n(31),n(112);var o=n(58),l=n.n(o),r={name:"WebsiteScreenshots",head:function(){return this.$store.state.currentTool.head},data:function(){return{url:"",results:"",advancedOptions:!1,authentication:!1,options:{width:1280,height:800,styles:"",scripts:"",element:"",hideElements:"",removeElements:"",clickElement:"",userAgent:"",headers:"",cookies:"",delay:0,authentication:{username:"",password:""}},loading:!1}},methods:{screenshots:function(){var t=this;if(this.loading)return!1;if(l.a.isURL(this.url)){var e=this.validate();if(!e)return!1;this.loading=!0,this.results="",this.$axios.post("/website_screenshots",{url:this.url,options:e}).then((function(e){t.loading=!1,t.results="data:image/jpg;base64,".concat(e.data.data)})).catch((function(e){t.loading=!1,t.$notify.error({title:"截图失败",message:e})}))}else this.$notify.error({title:"截图失败",message:"请输入正确的链接"})},validate:function(){if(!(this.options.width>100&&this.options.width<7680&this.options.height>100&&this.options.height<4320))return alert("宽高请在 100x100 至 7680x4320 之间"),!1;if(this.options.delay>15)return alert("等待时间最多为15秒"),!1;if(!this.advancedOptions)return{width:parseInt(this.options.width),height:parseInt(this.options.height)};if(this.options.headers)try{JSON.parse(this.options.headers)}catch(t){return this.$notify.error({title:"截图失败",message:"headers 必须是一个对象"}),!1}if(this.authentication&&(!this.options.authentication.username||!this.options.authentication.password))return this.$notify.error({title:"截图失败",message:"请填写http认证信息"}),!1;var t=Object.assign({},this.options);return t.width=parseInt(t.width),t.height=parseInt(t.height),t.delay=parseInt(t.delay),Object.keys(t).forEach((function(e){""===t[e]&&delete t[e],["hideElements","removeElements","scripts","styles"].includes(e)&&t[e]&&(t[e]=t[e].split("\n"))})),t}}},c=(n(2323),n(5)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"website_screenshots"},[n("nya-container",{attrs:{title:"网页截图"}},[n("div",{staticClass:"nya-subtitle"},[t._v("\n            请输入网址\n        ")]),t._v(" "),n("el-input",{attrs:{placeholder:"https://tools.miku.ac/",autofocus:"",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.screenshots(e)}},model:{value:t.url,callback:function(e){t.url="string"==typeof e?e.trim():e},expression:"url"}},[n("el-button",{attrs:{slot:"append",loading:t.loading},on:{click:t.screenshots},slot:"append"},[t._v("\n                "+t._s(t.loading?"截图中":"开始截图")+"\n            ")])],1),t._v(" "),n("div",{staticClass:"size mt-15"},[n("div",{staticClass:"nya-subtitle"},[t._v("\n                宽度\n            ")]),t._v(" "),n("el-input",{attrs:{placeholder:"1024x768",autofocus:"",clearable:""},model:{value:t.options.width,callback:function(e){t.$set(t.options,"width","string"==typeof e?e.trim():e)},expression:"options.width"}}),t._v(" "),n("span"),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                高度\n            ")]),t._v(" "),n("el-input",{attrs:{placeholder:"1024x768",autofocus:"",clearable:""},model:{value:t.options.height,callback:function(e){t.$set(t.options,"height","string"==typeof e?e.trim():e)},expression:"options.height"}})],1),t._v(" "),n("div",{staticClass:"mt-15 mb-15"},[n("div",{staticClass:"nya-subtitle inline-title"},[t._v("\n                启用高级选项\n            ")]),t._v(" "),n("el-switch",{model:{value:t.advancedOptions,callback:function(e){t.advancedOptions=e},expression:"advancedOptions"}})],1),t._v(" "),t.advancedOptions?[n("div",{staticClass:"nya-subtitle"},[t._v("\n                在页面加载完成后等待数秒(如果网页上有动画，这个功能将会有用)\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{type:"number",placeholder:"5",autofocus:"",clearable:""},model:{value:t.options.delay,callback:function(e){t.$set(t.options,"delay","string"==typeof e?e.trim():e)},expression:"options.delay"}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                自定义 style 标签，多个用换行分开\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{placeholder:".body{display: none}” 会被解析成 “<style>.body{background: red}</style>",autofocus:"",clearable:""},model:{value:t.options.styles,callback:function(e){t.$set(t.options,"styles","string"==typeof e?e.trim():e)},expression:"options.styles"}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                自定义 script 标签，多个用换行分开\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},placeholder:"console.log('script');” 会被解析成 “<script>console.log('script');<\/script>",autofocus:""},model:{value:t.options.scripts,callback:function(e){t.$set(t.options,"scripts",e)},expression:"options.scripts"}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                要截图的 CSS 选择器\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{placeholder:"#main",autofocus:"",clearable:""},model:{value:t.options.element,callback:function(e){t.$set(t.options,"element","string"==typeof e?e.trim():e)},expression:"options.element"}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                要隐藏的 CSS 选择器，多个用换行分开\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},placeholder:"#nav",autofocus:"",clearable:""},model:{value:t.options.hideElements,callback:function(e){t.$set(t.options,"hideElements",e)},expression:"options.hideElements"}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                要删除的 CSS 选择器，多个用换行分开\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},placeholder:"#footer",autofocus:"",clearable:""},model:{value:t.options.removeElements,callback:function(e){t.$set(t.options,"removeElements",e)},expression:"options.removeElements"}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                需要点击的 CSS 选择器\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{placeholder:"#click",autofocus:"",clearable:""},model:{value:t.options.clickElement,callback:function(e){t.$set(t.options,"clickElement","string"==typeof e?e.trim():e)},expression:"options.clickElement"}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                userAgent\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{placeholder:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36",autofocus:"",clearable:""},model:{value:t.options.userAgent,callback:function(e){t.$set(t.options,"userAgent","string"==typeof e?e.trim():e)},expression:"options.userAgent"}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                headers（Object）\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{placeholder:'{ "x-powered-by": "https://github.com" }',autofocus:"",clearable:""},model:{value:t.options.headers,callback:function(e){t.$set(t.options,"headers","string"==typeof e?e.trim():e)},expression:"options.headers"}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n                Cookies（Object | String）\n            ")]),t._v(" "),n("el-input",{staticClass:"mb-15",attrs:{placeholder:'BAIDUID=AAAAAAAAAA; 或者 { "BAIDUID": "AAAAAAAAAA" }',autofocus:"",clearable:""},model:{value:t.options.cookies,callback:function(e){t.$set(t.options,"cookies","string"==typeof e?e.trim():e)},expression:"options.cookies"}}),t._v(" "),n("el-checkbox",{model:{value:t.authentication,callback:function(e){t.authentication=e},expression:"authentication"}},[t._v("\n                需要HTTP认证\n            ")]),t._v(" "),t.authentication?[n("div",{staticClass:"nya-subtitle mt-15"},[t._v("\n                    USERNAME\n                ")]),t._v(" "),n("el-input",{attrs:{placeholder:"jack",autofocus:"",clearable:""},model:{value:t.options.authentication.username,callback:function(e){t.$set(t.options.authentication,"username","string"==typeof e?e.trim():e)},expression:"options.authentication.username"}}),t._v(" "),n("div",{staticClass:"nya-subtitle mt-15"},[t._v("\n                    PASSWORD\n                ")]),t._v(" "),n("el-input",{attrs:{placeholder:"123456",autofocus:"",clearable:""},model:{value:t.options.authentication.password,callback:function(e){t.$set(t.options.authentication,"password","string"==typeof e?e.trim():e)},expression:"options.authentication.password"}})]:t._e()]:t._e()],2),t._v(" "),t.results?n("nya-container",{attrs:{title:"截图成功"}},[n("img",{attrs:{src:t.results,alt:"results"}})]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},976:function(t,e,n){var content=n(2324);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("74da88e9",content,!0,{sourceMap:!1})}}]);