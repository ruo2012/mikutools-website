(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1928:function(t,e,l){"use strict";var o=l(893);l.n(o).a},1929:function(t,e,l){(e=l(10)(!1)).push([t.i,".ce_ping .loading{text-align:center;margin-bottom:.625rem}.ce_ping .loading .nya-loading{margin:3.75rem auto 1.25rem}.ce_ping table td{font-size:.75rem}.ce_ping table tr.color-0{background-color:rgba(101,223,132,.52157)}.ce_ping table tr.color-1{background-color:rgba(71,218,108,.52549)}.ce_ping table tr.color-2{background-color:rgba(247,214,67,.54902)}.ce_ping table tr.color-3{background-color:rgba(247,203,7,.56078)}.ce_ping table tr.color-4{background-color:rgba(250,84,120,.55686)}.ce_ping table tr.color-x{background-color:rgba(157,162,171,.55686)}",""]),t.exports=e},2400:function(t,e,l){"use strict";l.r(e);l(49),l(31),l(112);var o=l(58),n=l.n(o),r={name:"CePing",head:function(){return this.$store.state.currentTool.head},data:function(){return{url:"",results:"",showColor:!1,loading:!1,data:[]}},methods:{tableRowClassName:function(t){var e=t.row,time=parseInt(e.Avg);return this.showColor?time<=10?"color-0":time>10&&time<=20?"color-1":time>20&&time<=30?"color-2":time>30&&time<=40?"color-3":time>40?"color-4":"color-x":""},test:function(){var t=this;if(this.loading)return!1;n.a.isURL(this.url)?(this.loading=!0,this.results="",this.$axios.post("".concat(this.$store.state.env.apiUrlCn,"/ce_ping"),{url:this.url}).then((function(e){t.getTask(e.data.data.tid)})).catch((function(e){t.loading=!1,t.$notify.error({title:"测速失败",message:e})}))):this.$notify.error({title:"测速失败",message:"请输入正确的链接"})},getTask:function(t){var e=this;!function l(){e.$axios.post("".concat(e.$store.state.env.apiUrlCn,"/ce_ping/task"),{id:t}).then((function(t){e.results=t.data.data,e.data=Object.keys(t.data.data.freshdata).map((function(e){return t.data.data.freshdata[e]})),3===parseInt(t.data.data.taskstatus)?(e.loading=!1,e.$notify.success({title:"测速完成"})):setTimeout((function(){l()}),2e3)})).catch((function(t){e.loading=!1,e.$notify.error({title:"测速失败",message:t})}))}()},viewHeader:function(t){this.$alert('<pre style="text-align: left; line-height: inherit; font-family: monospace;"><code>'.concat(t,"</code></pre>"),"详情")}}},c=(l(1928),l(5)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"ce_ping"},[l("nya-container",{attrs:{title:"网站测速（PING）"}},[l("div",{staticClass:"nya-subtitle"},[t._v("\n            输入链接开始测速\n        ")]),t._v(" "),l("el-input",{staticClass:"mb-15",attrs:{placeholder:"http://github.com",autofocus:"",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.test(e)}},model:{value:t.url,callback:function(e){t.url="string"==typeof e?e.trim():e},expression:"url"}},[l("el-button",{attrs:{slot:"append",loading:t.loading},on:{click:t.test},slot:"append"},[t._v("\n                "+t._s(t.loading?"测速中":"开始测速")+"\n            ")])],1),t._v(" "),l("div",{staticClass:"nya-subtitle inline-title"},[t._v("\n            显示背景颜色\n        ")]),t._v(" "),l("el-switch",{model:{value:t.showColor,callback:function(e){t.showColor=e},expression:"showColor"}})],1),t._v(" "),t.data.length?l("nya-container",{attrs:{title:t.loading?"测速中，未完成":"测速完成（点击表格可进行排序）"}},[t.results.num?l("p",[t._v("\n            共获取到："+t._s(t.results.num)+" 个监测点\n        ")]):t._e(),t._v(" "),t.results.average_data&&t.results.average_data.Avg&&t.results.average_data.Max&&t.results.average_data.Min?l("p",[t._v("\n            平均时间："+t._s(parseFloat(t.results.average_data.Avg).toFixed(2))+"，最大时间："+t._s(parseFloat(t.results.average_data.Max).toFixed(2))+"，最小时间："+t._s(parseFloat(t.results.average_data.Min).toFixed(2))+"\n        ")]):t._e(),t._v(" "),l("el-table",{attrs:{data:t.data,border:"","row-class-name":t.tableRowClassName}},[l("el-table-column",{attrs:{prop:"name",label:"节点",width:"150",fixed:""}}),t._v(" "),l("el-table-column",{attrs:{prop:"ip",label:"IP",width:"150"}}),t._v(" "),l("el-table-column",{attrs:{prop:"isp",label:"ISP",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"view",label:"省份",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"SrcIP.srcip",label:"解析IP",width:"150"}}),t._v(" "),l("el-table-column",{attrs:{prop:"SrcIP.ipfrom",label:"IP所在地",width:"200"}}),t._v(" "),l("el-table-column",{attrs:{prop:"PacketsSent",label:"发送",width:"80",sortable:""}}),t._v(" "),l("el-table-column",{attrs:{prop:"PacketsRecv",label:"接收",width:"80",sortable:""}}),t._v(" "),l("el-table-column",{attrs:{prop:"PacketsLost",label:"丢弃",width:"80",sortable:""}}),t._v(" "),l("el-table-column",{attrs:{prop:"Avg",label:"平均时间",width:"130",sortable:""}}),t._v(" "),l("el-table-column",{attrs:{prop:"Max",label:"最大时间",width:"130",sortable:""}}),t._v(" "),l("el-table-column",{attrs:{prop:"PingStr",label:"PingStr",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(l){return l.preventDefault(),t.viewHeader(e.row.PingStr)}}},[t._v("\n                        查看详情\n                    ")])]}}],null,!1,1161451985)})],1),t._v(" "),t.loading?l("div",{staticClass:"loading"},[l("nya-loading"),t._v(" "),l("span",[t._v("测速中，请稍后")])],1):t._e()],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},893:function(t,e,l){var content=l(1929);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(11).default)("334b29f5",content,!0,{sourceMap:!1})}}]);