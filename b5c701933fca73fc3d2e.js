(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{2147:function(e,t,r){"use strict";var l=r(946);r.n(l).a},2148:function(e,t,r){(t=r(10)(!1)).push([e.i,".screen_record .nya-select{margin-bottom:.9375rem}",""]),e.exports=t},2468:function(e,t,r){"use strict";r.r(t);r(72),r(56);var l,o=r(13),n=r(784),c={name:"ScreenRecord",head:function(){return this.$store.state.currentTool.head},data:function(){return{aspectRatio:"default",frameRate:"default",resolutions:"default",cursor:"default",mediaRecorder:null,mediaStream:null,recordeBlods:[],previewUrl:""}},watch:{mediaStream:{handler:function(){(this.$refs.video||{}).srcObject=this.mediaStream},immediate:!0}},methods:{recorde:function(){this.mediaStream?this.stop():this.start()},start:(l=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mediaRecorder=null,this.mediaStream=null,this.recordeBlods=[],e.prev=3,t=this.getDisplayMediaOptions(),e.next=7,navigator.mediaDevices.getDisplayMedia(t);case 7:this.mediaStream=e.sent,this.mediaStream.oninactive=function(){this.stop()}.bind(this),this.mediaRecorder=new MediaRecorder(this.mediaStream),this.mediaRecorder.ondataavailable=this.handleDataAvailable,this.mediaRecorder.start(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),this.$notify.error({title:e.t0.name,message:e.t0.message});case 17:case"end":return e.stop()}}),e,this,[[3,14]])}))),function(){return l.apply(this,arguments)}),stop:function(){this.mediaStream&&(this.mediaStream.getTracks().forEach((function(track){track.stop()})),this.mediaStream=null,this.mediaRecorder.stop())},handleDataAvailable:function(e){e.data.size>0&&(this.recordeBlods.push(e.data),this.createPreviewVideo())},createPreviewVideo:function(){var e=new Blob(this.recordeBlods,{type:"video/webm"});this.recordeBlods=[],this.previewUrl=URL.createObjectURL(e),Object(n.a)(this.previewUrl,"screen_record.webm")},getDisplayMediaOptions:function(){var e={};return"default"!==this.aspectRatio&&(e.aspectRatio=this.aspectRatio),"default"!==this.frameRate&&(e.frameRate=this.frameRate),"default"!==this.cursor&&(e.cursor=this.cursor),"default"!==this.resolutions&&("fit-screen"===this.resolutions&&(e.width=screen.width,e.height=screen.height),"4K"===this.resolutions&&(e.width=3840,e.height=2160),"1080p"===this.resolutions&&(e.width=1920,e.height=1080),"720p"===this.resolutions&&(e.width=1280,e.height=720)),{video:e,audio:!1}}}},d=(r(2147),r(5)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"screen_record"},[r("nya-container",{attrs:{title:"屏幕录制"}},[r("div",{staticClass:"nya-subtitle"},[e._v("\n            选择长宽比\n        ")]),e._v(" "),r("el-select",{staticClass:"full-width mb-15",attrs:{placeholder:"选择长宽比"},model:{value:e.aspectRatio,callback:function(t){e.aspectRatio=t},expression:"aspectRatio"}},[r("el-option",{attrs:{label:"默认",value:"default"}}),e._v(" "),r("el-option",{attrs:{label:"16:9",value:"1.77"}}),e._v(" "),r("el-option",{attrs:{label:"4:3",value:"1.33"}}),e._v(" "),r("el-option",{attrs:{label:"21:9",value:"2.35"}}),e._v(" "),r("el-option",{attrs:{label:"14:10",value:"1.4"}}),e._v(" "),r("el-option",{attrs:{label:"19:10",value:"1.9"}})],1),e._v(" "),r("div",{staticClass:"nya-subtitle"},[e._v("\n            选择帧率\n        ")]),e._v(" "),r("el-select",{staticClass:"full-width mb-15",attrs:{placeholder:"选择帧率"},model:{value:e.frameRate,callback:function(t){e.frameRate=t},expression:"frameRate"}},[r("el-option",{attrs:{label:"默认",value:"default"}}),e._v(" "),r("el-option",{attrs:{label:"60",value:"60"}}),e._v(" "),r("el-option",{attrs:{label:"30",value:"30"}}),e._v(" "),r("el-option",{attrs:{label:"25",value:"25"}}),e._v(" "),r("el-option",{attrs:{label:"15",value:"15"}}),e._v(" "),r("el-option",{attrs:{label:"5",value:"5"}})],1),e._v(" "),r("div",{staticClass:"nya-subtitle"},[e._v("\n            选择分辨率\n        ")]),e._v(" "),r("el-select",{staticClass:"full-width mb-15",attrs:{placeholder:"选择分辨率"},model:{value:e.resolutions,callback:function(t){e.resolutions=t},expression:"resolutions"}},[r("el-option",{attrs:{label:"默认",value:"default"}}),e._v(" "),r("el-option",{attrs:{label:"屏幕尺寸",value:"fit-screen"}}),e._v(" "),r("el-option",{attrs:{label:"4k",value:"4K"}}),e._v(" "),r("el-option",{attrs:{label:"1080p",value:"1080p"}}),e._v(" "),r("el-option",{attrs:{label:"720p",value:"720p"}})],1),e._v(" "),r("div",{staticClass:"nya-subtitle"},[e._v("\n            是否显示光标\n        ")]),e._v(" "),r("el-select",{staticClass:"full-width mb-15",attrs:{placeholder:"是否显示光标"},model:{value:e.cursor,callback:function(t){e.cursor=t},expression:"cursor"}},[r("el-option",{attrs:{label:"默认",value:"default"}}),e._v(" "),r("el-option",{attrs:{label:"是",value:"always"}}),e._v(" "),r("el-option",{attrs:{label:"否",value:"never"}})],1),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.recorde}},[e._v("\n            "+e._s(e.mediaStream?"停 止":"开 始")+"\n        ")])],1),e._v(" "),r("nya-container",{directives:[{name:"show",rawName:"v-show",value:e.mediaStream,expression:"mediaStream"}],attrs:{title:"实时预览"}},[r("video",{ref:"video",staticStyle:{width:"100%"},attrs:{autoplay:""}})]),e._v(" "),r("nya-container",{directives:[{name:"show",rawName:"v-show",value:e.previewUrl&&!e.mediaStream,expression:"previewUrl && !mediaStream"}],attrs:{title:"预览"}},[r("video",{ref:"preview",staticStyle:{width:"100%"},attrs:{src:e.previewUrl,loop:"",controls:"",autoplay:""}})]),e._v(" "),r("nya-container",{attrs:{title:"说明"}},[r("ul",{staticClass:"nya-list"},[r("li",[e._v("出现无法使用的情况请更换 Chrome 浏览器最新版，仅支持PC端，不支持录制系统/麦克风音频。")]),e._v(" "),r("li",[e._v("录制完后可鼠标右键另存为下载")])])])],1)}),[],!1,null,null,null);t.default=component.exports},784:function(e,t,r){"use strict";t.a=function(e,t){var a=document.createElement("a");a.href=e,a.download=t,a.click()}},946:function(e,t,r){var content=r(2148);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("f8c40e42",content,!0,{sourceMap:!1})}}]);